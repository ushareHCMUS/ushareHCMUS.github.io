webpackJsonp([3],{1795:function(e,t,o){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}!function(){var t=o(0).enterModule;t&&t(e)}(),Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=o(0).enterModule;t&&t(e)}();var s=o(2754),n=r(s),a=n.default;t.default=a,function(){var t=o(0).default,r=o(0).leaveModule;t&&(t.register(a,"default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/index.js"),r(e))}(),function(){var t=o(0).default,s=o(0).leaveModule;t&&(t.register(n,"_Rooms2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/index.js"),t.register(r,"_interopRequireDefault","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/index.js"),t.register(a,"_default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/index.js"),s(e))}()}).call(t,o(12)(e))},2754:function(e,t,o){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var t=o(0).enterModule;t&&t(e)}(),Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();!function(){var t=o(0).enterModule;t&&t(e)}();var i=o(1),l=r(i),p=o(101),m=o(456),f=o(293),d=o(457),h=r(d),_=o(294),g=r(_),b=o(455),k=o(2755),y=o(765),D=o(2756),v=r(D),S=function(e){function t(e){s(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.menuOpenHandler=function(e){o.setState({menuOpen:!0,anchorEl:e.currentTarget})},o.menuCloseHandler=function(e){o.setState({menuOpen:!1})},o.menuItemClickHandler=function(e,t){o.setState({menuOpen:!1,addUserDialogOpen:!0,addingRole:t.key})},o.handleRoomSearch=o.handleRoomSearch.bind(o),o.renderRooms=o.renderRooms.bind(o),o.state={roomSearch:"",declineDialogOpen:!1,declineReason:"",declineData:{}},o}return a(t,e),c(t,[{key:"handleRoomSearch",value:function(e){var t=e.currentTarget.value;this.setState({roomSearch:t})}},{key:"renderRooms",value:function(e){var t=this,o=JSON.parse(JSON.stringify(e));return""!=this.state.roomSearch.trim()&&Object.keys(o).filter(function(e){return o[e].rooms=o[e].rooms.filter(function(e){return e.idRoom.toLowerCase().includes(t.state.roomSearch.toLowerCase())}),!0}),Object.keys(o).map(function(e,t){return l.default.createElement(RoomItem,{blockName:e,blockData:o[e]})})}},{key:"mapShift",value:function(e){switch(e){case 1:return"07:00 - 08:30";case 2:return"08:45 - 10:15";case 3:return"10:30 - 12:00";case 4:return"13:00 - 14:30";case 5:return"14:45 - 16:15";case 6:return"16:30 - 18:00"}}},{key:"renderBookingInfo",value:function(e){var t=this;return Object.keys(e).map(function(o){if("0"==e[o].status){var r=JSON.parse(JSON.stringify(e[o]));return r.status=1,l.default.createElement(b.Paper,{className:"card"},l.default.createElement("div",{className:"card-header text-muted",style:{backgroundColor:"0"==e[o].status?"red":"blue"}}),l.default.createElement("div",{className:"card-body d-flex flex-row"},l.default.createElement("div",{className:"col-10"},l.default.createElement("h5",null,"Mục đích : ",e[o].content),l.default.createElement("h5",null,"Phòng : ",e[o].idRoom),l.default.createElement("h5",null,"Thời gian : ",t.mapShift(e[o].shift)),l.default.createElement("h5",null,"Ngày : ",(0,y.formatUrlDateString)(1e3*e[o].date.seconds))),l.default.createElement("div",{className:"col-2 d-flex flex-column align-items-center justify-content-center"},l.default.createElement(b.FlatButton,{label:"Chấp nhận",primary:!0,onClick:function(e){t.props.changeRoomBookingStatus(o,r);var s=JSON.parse(JSON.stringify(r));delete s.content,s.date=r.date,s.status=1,s.success=!0,s.message="BQT đã chấp nhận yêu cầu đặt phòng của bạn",t.props.addRoomBookingNoti(s)}}),l.default.createElement(b.FlatButton,{label:"Từ chối",onClick:function(e){var s=JSON.parse(JSON.stringify(r));s.success=!0,s.status=-1,s.message="Yêu cầu đặt phòng bị từ chối, Lý do: ",s.info=o,t.setState({declineDialogOpen:!0,declineData:s})},style:{backgroundColor:"red",color:"white"}}))))}})}},{key:"render",value:function(){var e=this,t=this.props,o=(t.blocks,t.bookingInfo);t.bookingNoti,t.bookingStatus;return void 0!=o?0==o.length?l.default.createElement(h.default,{open:!0}):l.default.createElement(g.default,{type:"bottom",className:"container ui-animate"},l.default.createElement(b.Paper,null,l.default.createElement("h4",{style:{padding:"14px 20px"}},"Yêu cầu đặt phòng")),l.default.createElement("div",{key:"1"},this.renderBookingInfo(o)),l.default.createElement(v.default,{open:this.state.declineDialogOpen,decline:function(t){var o=JSON.parse(JSON.stringify(e.state.declineData));o.message+=t,o.success=!1;var r=o.info;delete o.info,e.props.addRoomBookingNoti(o),e.props.changeRoomBookingStatus(r,o)},handleClose:function(t){e.setState({declineDialogOpen:!1})}})):l.default.createElement("div",null)}}]),t}(i.Component),w=function(e,t){return{auth:e.firebase.auth,blocks:e.firestore.data.rooms,bookingInfo:e.firestore.data.room_booking,bookingNoti:e.firestore.data.room_booking_noti}},R=function(e){return{addRoomBookingNoti:function(t){return e((0,k.addRoomBookingNoti)(t))},changeRoomBookingStatus:function(t,o){return e((0,k.changeRoomBookingStatus)(t,o))}}},j=(0,f.compose)((0,p.connect)(w,R),(0,m.firestoreConnect)([{collection:"rooms"},{collection:"room_booking"},{collection:"room_booking_noti"}]))(S);t.default=j,function(){var t=o(0).default,r=o(0).leaveModule;t&&(t.register(S,"Rooms","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(w,"mapStateToProps","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(R,"mapDispatchToProps","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(j,"default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),r(e))}(),function(){var t=o(0).default,u=o(0).leaveModule;t&&(t.register(c,"_createClass","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(l,"_react2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(h,"_PageLoading2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(g,"_rcQueueAnim2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(v,"_DeclineDialog2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(r,"_interopRequireDefault","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(s,"_classCallCheck","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(n,"_possibleConstructorReturn","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(a,"_inherits","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(S,"Rooms","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(w,"mapStateToProps","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(R,"mapDispatchToProps","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),t.register(j,"_default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/Rooms.js"),u(e))}()}).call(t,o(12)(e))},2755:function(e,t,o){"use strict";(function(e){function r(e){for(var t="";t.length<e;t+=Math.random().toString(36).substr(2));return t.substr(0,e)}!function(){var t=o(0).enterModule;t&&t(e)}(),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};!function(){var t=o(0).enterModule;t&&t(e)}();var n=t.changeRoomBookingStatus=function(e,t){return function(o,r,s){var n=(s.getFirebase,s.getFirestore),a=n(),u=a.batch();u.update(a.collection("room_booking").doc(e),{status:t.status}),u.commit().then(function(){o({type:"CHANGE_ROOM_BOOKING_STATUS"})}).catch(function(e){o({type:"CHANGE_ROOM_BOOKING_STATUS_ERROR",err:e})})}},a=t.addRoomBookingNoti=function(e){return function(t,o,n){var a=(n.getFirebase,n.getFirestore),u=a(),c=u.batch();c.set(u.collection("room_booking_noti").doc(r(20)),s({},e,{date:new Date(1e3*e.date.seconds),timeStamp:u.FieldValue.serverTimestamp()})),c.commit().then(function(){t({type:"ADD_BOOKING_NOTI"})}).catch(function(e){t({type:"ADD_BOOKING_NOTI_ERROR",err:e})})}},u=t.changeRemoveStatus=function(){return function(e){e({type:"CHANGE_REMOVE_STATUS"})}},c=t.changeAddStatus=function(){return function(e){e({type:"CHANGE_ADD_STATUS"})}};!function(){var t=o(0).default,s=o(0).leaveModule;t&&(t.register(n,"changeRoomBookingStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(r,"createRandomString","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(a,"addRoomBookingNoti","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(u,"changeRemoveStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(c,"changeAddStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),s(e))}(),function(){var t=o(0).default,i=o(0).leaveModule;t&&(t.register(s,"_extends","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(n,"changeRoomBookingStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(r,"createRandomString","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(a,"addRoomBookingNoti","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(u,"changeRemoveStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),t.register(c,"changeAddStatus","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/actions/index.js"),i(e))}()}).call(t,o(12)(e))},2756:function(e,t,o){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var t=o(0).enterModule;t&&t(e)}(),Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();!function(){var t=o(0).enterModule;t&&t(e)}();var i=o(1),l=r(i),p=o(455),m=o(130),f=function(e){function t(e){s(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.declineHandler=function(){o.setState({reasonErr:""}),""!==o.state.reason&&(o.props.handleClose(),o.props.decline(o.state.reason)),""==o.state.reason&&o.setState({reasonErr:"Lý do không được rỗng"})},o.state={reason:"",reasonErr:""},o}return a(t,e),c(t,[{key:"componentWillReceiveProps",value:function(){this.setState({reason:"",reasonErr:""})}},{key:"render",value:function(){var e=this;return l.default.createElement(p.Dialog,{title:"Từ chối đặt phòng",actions:[l.default.createElement(p.FlatButton,{label:"Huỷ",onClick:this.props.handleClose,style:{color:m.red600,minWidth:"100px",margin:"10px 10px 10px 0px",cursor:"pointer"}}),l.default.createElement(p.FlatButton,{label:"Huỷ đặt phòng",onClick:this.declineHandler,style:{minWidth:"100px",margin:"10px 10px 10px 0px",cursor:"pointer"}})],autoScrollBodyContent:!0,open:this.props.open,contentStyle:{width:"100%"},onRequestClose:this.props.handleClose},l.default.createElement(p.TextField,{name:"decoy",style:{width:"0px",height:"0px"}}),l.default.createElement(p.TextField,{floatingLabelText:"Lý do",onChange:function(t){return e.setState({reason:t.currentTarget.value})},name:"Lý do",errorText:this.state.reasonErr,fullWidth:!0}))}}]),t}(i.Component),d=f;t.default=d,function(){var t=o(0).default,r=o(0).leaveModule;t&&(t.register(f,"DeclineDialog","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(d,"default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),r(e))}(),function(){var t=o(0).default,u=o(0).leaveModule;t&&(t.register(c,"_createClass","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(l,"_react2","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(r,"_interopRequireDefault","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(s,"_classCallCheck","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(n,"_possibleConstructorReturn","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(a,"_inherits","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(f,"DeclineDialog","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),t.register(d,"_default","/Users/131696/Desktop/u_share_web/heat-control/src/routes/app/routes/rooms/components/DeclineDialog.js"),u(e))}()}).call(t,o(12)(e))}});
//# sourceMappingURL=3.eb811890f7e8925bfac4.chunk.js.map